2022-07-04 15:50:51.0095 ||ERROR|LY.Report.Core.Program|Stopped program because of exception System.Exception: 【主库】状态不可用，等待后台检查程序恢复方可使用。用户 'delivery' 登录失败。
   at FreeSql.Internal.ObjectPool.ObjectPool`1.GetFree(Boolean checkAvailable)
   at FreeSql.Internal.ObjectPool.ObjectPool`1.Get(Nullable`1 timeout)
   at FreeSql.SqlServer.SqlServerCodeFirst.GetComparisonDDLStatements(TypeAndName[] objects)
   at FreeSql.Internal.CommonProvider.CodeFirstProvider.SyncStructure(TypeAndName[] objects)
   at FreeSql.Internal.CommonProvider.CodeFirstProvider.SyncStructure(Type[] entityTypes)
   at LY.Report.Core.Repository.Base.DbHelper.SyncStructure(IFreeSql db, String msg, DbConfig dbConfig, AppConfig appConfig) in D:\LingYiProject\GitProject\LYAdmin\Delivery.Core\LY.Report.Core.Repository\Base\DbHelper.cs:line 229
   at LY.Report.Core.Db.DBServiceCollectionExtensions.AddDbAsync(IServiceCollection services, IHostEnvironment env) in D:\LingYiProject\GitProject\LYAdmin\Delivery.Core\LY.Report.Core\Db\DBServiceCollectionExtensions.cs:line 67|url: |action: 
2022-07-04 16:28:08.8264 |1|ERROR|Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware|An unhandled exception has occurred while executing the request. Autofac.Core.DependencyResolutionException: An exception was thrown while activating Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator -> λ:Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorOptions -> Microsoft.Extensions.Options.UnnamedOptionsManager`1[[Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorOptions, Swashbuckle.AspNetCore.SwaggerGen, Version=6.2.3.0, Culture=neutral, PublicKeyToken=d84d99fb0135530a]] -> Microsoft.Extensions.Options.OptionsFactory`1[[Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorOptions, Swashbuckle.AspNetCore.SwaggerGen, Version=6.2.3.0, Culture=neutral, PublicKeyToken=d84d99fb0135530a]] -> λ:Microsoft.Extensions.Options.IConfigureOptions`1[[Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorOptions, Swashbuckle.AspNetCore.SwaggerGen, Version=6.2.3.0, Culture=neutral, PublicKeyToken=d84d99fb0135530a]][] -> Swashbuckle.AspNetCore.SwaggerGen.ConfigureSwaggerGeneratorOptions.
 ---> Autofac.Core.DependencyResolutionException: An exception was thrown while invoking the constructor 'Void .ctor(Microsoft.Extensions.Options.IOptions`1[Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenOptions], System.IServiceProvider, Microsoft.AspNetCore.Hosting.IWebHostEnvironment)' on type 'ConfigureSwaggerGeneratorOptions'.
 ---> System.IO.FileNotFoundException: Could not find file 'D:\LingYiProject\GitProject\LYAdmin\Delivery.Core\LY.Report.Core\SwaggerDoc\LY.Report.Core.Model.xml'.
File name: 'D:\LingYiProject\GitProject\LYAdmin\Delivery.Core\LY.Report.Core\SwaggerDoc\LY.Report.Core.Model.xml'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize)
   at System.Xml.XmlDownloadManager.GetStream(Uri uri, ICredentials credentials, IWebProxy proxy)
   at System.Xml.XmlUrlResolver.GetEntity(Uri absoluteUri, String role, Type ofObjectToReturn)
   at System.Xml.XmlTextReaderImpl.OpenUrl()
   at System.Xml.XmlTextReaderImpl.Read()
   at System.Xml.XPath.XPathDocument.LoadFromReader(XmlReader reader, XmlSpace space)
   at System.Xml.XPath.XPathDocument..ctor(String uri, XmlSpace space)
   at System.Xml.XPath.XPathDocument..ctor(String uri)
   at Microsoft.Extensions.DependencyInjection.SwaggerGenOptionsExtensions.<>c__DisplayClass30_0.<IncludeXmlComments>b__0()
   at Microsoft.Extensions.DependencyInjection.SwaggerGenOptionsExtensions.IncludeXmlComments(SwaggerGenOptions swaggerGenOptions, Func`1 xmlDocFactory, Boolean includeControllerXmlComments)
   at Microsoft.Extensions.DependencyInjection.SwaggerGenOptionsExtensions.IncludeXmlComments(SwaggerGenOptions swaggerGenOptions, String filePath, Boolean includeControllerXmlComments)
   at LY.Report.Core.Startup.<>c__DisplayClass5_0.<ConfigureServices>b__7(SwaggerGenOptions options) in D:\LingYiProject\GitProject\LYAdmin\Delivery.Core\LY.Report.Core\Startup.cs:line 239
   at Microsoft.Extensions.Options.ConfigureNamedOptions`1.Configure(String name, TOptions options)
   at Microsoft.Extensions.Options.OptionsFactory`1.Create(String name)
   at Microsoft.Extensions.Options.UnnamedOptionsManager`1.get_Value()
   at lambda_method311(Closure , Object[] )
   at Autofac.Core.Activators.Reflection.BoundConstructor.Instantiate()
   --- End of inner exception stack trace ---
   at Autofac.Core.Activators.Reflection.BoundConstructor.Instantiate()
   at Autofac.Core.Activators.Reflection.ReflectionActivator.ActivateInstance(IComponentContext context, IEnumerable`1 parameters)
   at Autofac.Core.Activators.Reflection.ReflectionActivator.<ConfigurePipeline>b__11_0(ResolveRequestContext ctxt, Action`1 next)
   at Autofac.Core.Resolving.Middleware.DelegateMiddleware.Execute(ResolveRequestContext context, Action`1 next)
   at Autofac.Core.Resolving.Pipeline.ResolvePipelineBuilder.<>c__DisplayClass14_0.<BuildPipeline>b__1(ResolveRequestContext ctxt)
   at Autofac.Core.Resolving.Middleware.DisposalTrackingMiddleware.Execute(ResolveRequestContext context, Action`1 next)
   at Autofac.Core.Resolving.Pipeline.ResolvePipelineBuilder.<>c__DisplayClass14_0.<BuildPipeline>b__1(ResolveRequestContext ctxt)
   at Autofac.Core.Resolving.Middleware.ActivatorErrorHandlingMiddleware.Execute(ResolveRequestContext context, Action`1 next)
   --- End of inner exception stack trace ---
   at Autofac.Core.Resolving.Middleware.ActivatorErrorHandlingMiddleware.Execute(ResolveRequestContext context, Action`1 next)
   at Autofac.Core.Resolving.Pipeline.ResolvePipelineBuilder.<>c__DisplayClass14_0.<BuildPipeline>b__1(ResolveRequestContext ctxt)
   at Autofac.Core.Pipeline.ResolvePipeline.Invoke(ResolveRequestContext ctxt)
   at Autofac.Core.Resolving.Middleware.RegistrationPipelineInvokeMiddleware.Execute(ResolveRequestContext context, Action`1 next)
   at Autofac.Core.Resolving.Pipeline.ResolvePipelineBuilder.<>c__DisplayClass14_0.<BuildPipeline>b__1(ResolveRequestContext ctxt)
   at Autofac.Core.Resolving.Middleware.SharingMiddleware.Execute(ResolveRequestContext context, Action`1 next)
   at Autofac.Core.Resolving.Pipeline.ResolvePipelineBuilder.<>c__DisplayClass14_0.<BuildPipeline>b__1(ResolveRequestContext ctxt)
   at Autofac.Core.Resolving.Pipeline.ResolvePipelineBuilder.<>c__DisplayClass14_0.<BuildPipeline>b__1(ResolveRequestContext ctxt)
   at Autofac.Core.Resolving.Middleware.CircularDependencyDetectorMiddleware.Execute(ResolveRequestContext context, Action`1 next)
   at Autofac.Core.Resolving.Pipeline.ResolvePipelineBuilder.<>c__DisplayClass14_0.<BuildPipeline>b__1(ResolveRequestContext ctxt)
   at Autofac.Core.Pipeline.ResolvePipeline.Invoke(ResolveRequestContext ctxt)
   at Autofac.Core.Resolving.ResolveOperation.GetOrCreateInstance(ISharingLifetimeScope currentOperationScope, ResolveRequest request)
   at Autofac.Core.Resolving.ResolveOperation.ExecuteOperation(ResolveRequest request)
   at Autofac.Core.Resolving.ResolveOperation.Execute(ResolveRequest request)
   at Autofac.Core.Lifetime.LifetimeScope.ResolveComponent(ResolveRequest request)
   at Autofac.ResolutionExtensions.TryResolveService(IComponentContext context, Service service, IEnumerable`1 parameters, Object& instance)
   at Autofac.ResolutionExtensions.ResolveOptionalService(IComponentContext context, Service service, IEnumerable`1 parameters)
   at Autofac.ResolutionExtensions.ResolveOptional(IComponentContext context, Type serviceType, IEnumerable`1 parameters)
   at Autofac.ResolutionExtensions.ResolveOptional(IComponentContext context, Type serviceType)
   at Autofac.Extensions.DependencyInjection.AutofacServiceProvider.GetService(Type serviceType)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.GetService(IServiceProvider sp, Type type, Type middleware)
   at lambda_method538(Closure , Object , HttpContext , IServiceProvider )
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.<>c__DisplayClass5_1.<UseMiddleware>b__2(HttpContext context)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)|url: http://locar.api.ly.com/swagger/index.html|action: 
2022-07-04 16:28:10.6014 |1|ERROR|Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware|An unhandled exception has occurred while executing the request. Autofac.Core.DependencyResolutionException: An exception was thrown while activating Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator -> λ:Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorOptions -> Microsoft.Extensions.Options.UnnamedOptionsManager`1[[Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorOptions, Swashbuckle.AspNetCore.SwaggerGen, Version=6.2.3.0, Culture=neutral, PublicKeyToken=d84d99fb0135530a]] -> Microsoft.Extensions.Options.OptionsFactory`1[[Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorOptions, Swashbuckle.AspNetCore.SwaggerGen, Version=6.2.3.0, Culture=neutral, PublicKeyToken=d84d99fb0135530a]] -> λ:Microsoft.Extensions.Options.IConfigureOptions`1[[Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorOptions, Swashbuckle.AspNetCore.SwaggerGen, Version=6.2.3.0, Culture=neutral, PublicKeyToken=d84d99fb0135530a]][] -> Swashbuckle.AspNetCore.SwaggerGen.ConfigureSwaggerGeneratorOptions.
 ---> Autofac.Core.DependencyResolutionException: An exception was thrown while invoking the constructor 'Void .ctor(Microsoft.Extensions.Options.IOptions`1[Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenOptions], System.IServiceProvider, Microsoft.AspNetCore.Hosting.IWebHostEnvironment)' on type 'ConfigureSwaggerGeneratorOptions'.
 ---> System.IO.FileNotFoundException: Could not find file 'D:\LingYiProject\GitProject\LYAdmin\Delivery.Core\LY.Report.Core\SwaggerDoc\LY.Report.Core.Model.xml'.
File name: 'D:\LingYiProject\GitProject\LYAdmin\Delivery.Core\LY.Report.Core\SwaggerDoc\LY.Report.Core.Model.xml'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize)
   at System.Xml.XmlDownloadManager.GetStream(Uri uri, ICredentials credentials, IWebProxy proxy)
   at System.Xml.XmlUrlResolver.GetEntity(Uri absoluteUri, String role, Type ofObjectToReturn)
   at System.Xml.XmlTextReaderImpl.OpenUrl()
   at System.Xml.XmlTextReaderImpl.Read()
   at System.Xml.XPath.XPathDocument.LoadFromReader(XmlReader reader, XmlSpace space)
   at System.Xml.XPath.XPathDocument..ctor(String uri, XmlSpace space)
   at System.Xml.XPath.XPathDocument..ctor(String uri)
   at Microsoft.Extensions.DependencyInjection.SwaggerGenOptionsExtensions.<>c__DisplayClass30_0.<IncludeXmlComments>b__0()
   at Microsoft.Extensions.DependencyInjection.SwaggerGenOptionsExtensions.IncludeXmlComments(SwaggerGenOptions swaggerGenOptions, Func`1 xmlDocFactory, Boolean includeControllerXmlComments)
   at Microsoft.Extensions.DependencyInjection.SwaggerGenOptionsExtensions.IncludeXmlComments(SwaggerGenOptions swaggerGenOptions, String filePath, Boolean includeControllerXmlComments)
   at LY.Report.Core.Startup.<>c__DisplayClass5_0.<ConfigureServices>b__7(SwaggerGenOptions options) in D:\LingYiProject\GitProject\LYAdmin\Delivery.Core\LY.Report.Core\Startup.cs:line 239
   at Microsoft.Extensions.Options.ConfigureNamedOptions`1.Configure(String name, TOptions options)
   at Microsoft.Extensions.Options.OptionsFactory`1.Create(String name)
   at Microsoft.Extensions.Options.UnnamedOptionsManager`1.get_Value()
   at lambda_method311(Closure , Object[] )
   at Autofac.Core.Activators.Reflection.BoundConstructor.Instantiate()
   --- End of inner exception stack trace ---
   at Autofac.Core.Activators.Reflection.BoundConstructor.Instantiate()
   at Autofac.Core.Activators.Reflection.ReflectionActivator.ActivateInstance(IComponentContext context, IEnumerable`1 parameters)
   at Autofac.Core.Activators.Reflection.ReflectionActivator.<ConfigurePipeline>b__11_0(ResolveRequestContext ctxt, Action`1 next)
   at Autofac.Core.Resolving.Middleware.DelegateMiddleware.Execute(ResolveRequestContext context, Action`1 next)
   at Autofac.Core.Resolving.Pipeline.ResolvePipelineBuilder.<>c__DisplayClass14_0.<BuildPipeline>b__1(ResolveRequestContext ctxt)
   at Autofac.Core.Resolving.Middleware.DisposalTrackingMiddleware.Execute(ResolveRequestContext context, Action`1 next)
   at Autofac.Core.Resolving.Pipeline.ResolvePipelineBuilder.<>c__DisplayClass14_0.<BuildPipeline>b__1(ResolveRequestContext ctxt)
   at Autofac.Core.Resolving.Middleware.ActivatorErrorHandlingMiddleware.Execute(ResolveRequestContext context, Action`1 next)
   --- End of inner exception stack trace ---
   at Autofac.Core.Resolving.Middleware.ActivatorErrorHandlingMiddleware.Execute(ResolveRequestContext context, Action`1 next)
   at Autofac.Core.Resolving.Pipeline.ResolvePipelineBuilder.<>c__DisplayClass14_0.<BuildPipeline>b__1(ResolveRequestContext ctxt)
   at Autofac.Core.Pipeline.ResolvePipeline.Invoke(ResolveRequestContext ctxt)
   at Autofac.Core.Resolving.Middleware.RegistrationPipelineInvokeMiddleware.Execute(ResolveRequestContext context, Action`1 next)
   at Autofac.Core.Resolving.Pipeline.ResolvePipelineBuilder.<>c__DisplayClass14_0.<BuildPipeline>b__1(ResolveRequestContext ctxt)
   at Autofac.Core.Resolving.Middleware.SharingMiddleware.Execute(ResolveRequestContext context, Action`1 next)
   at Autofac.Core.Resolving.Pipeline.ResolvePipelineBuilder.<>c__DisplayClass14_0.<BuildPipeline>b__1(ResolveRequestContext ctxt)
   at Autofac.Core.Resolving.Pipeline.ResolvePipelineBuilder.<>c__DisplayClass14_0.<BuildPipeline>b__1(ResolveRequestContext ctxt)
   at Autofac.Core.Resolving.Middleware.CircularDependencyDetectorMiddleware.Execute(ResolveRequestContext context, Action`1 next)
   at Autofac.Core.Resolving.Pipeline.ResolvePipelineBuilder.<>c__DisplayClass14_0.<BuildPipeline>b__1(ResolveRequestContext ctxt)
   at Autofac.Core.Pipeline.ResolvePipeline.Invoke(ResolveRequestContext ctxt)
   at Autofac.Core.Resolving.ResolveOperation.GetOrCreateInstance(ISharingLifetimeScope currentOperationScope, ResolveRequest request)
   at Autofac.Core.Resolving.ResolveOperation.ExecuteOperation(ResolveRequest request)
   at Autofac.Core.Resolving.ResolveOperation.Execute(ResolveRequest request)
   at Autofac.Core.Lifetime.LifetimeScope.ResolveComponent(ResolveRequest request)
   at Autofac.ResolutionExtensions.TryResolveService(IComponentContext context, Service service, IEnumerable`1 parameters, Object& instance)
   at Autofac.ResolutionExtensions.ResolveOptionalService(IComponentContext context, Service service, IEnumerable`1 parameters)
   at Autofac.ResolutionExtensions.ResolveOptional(IComponentContext context, Type serviceType, IEnumerable`1 parameters)
   at Autofac.ResolutionExtensions.ResolveOptional(IComponentContext context, Type serviceType)
   at Autofac.Extensions.DependencyInjection.AutofacServiceProvider.GetService(Type serviceType)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.GetService(IServiceProvider sp, Type type, Type middleware)
   at lambda_method538(Closure , Object , HttpContext , IServiceProvider )
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.<>c__DisplayClass5_1.<UseMiddleware>b__2(HttpContext context)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)|url: http://locar.api.ly.com/favicon.ico|action: 
2022-07-04 16:51:26.5764 ||ERROR|LY.Report.Core.Filters.AdminExceptionFilter| System.Net.WebException: An exception occurred during a WebClient request.
 ---> System.InvalidCastException: Unable to cast object of type 'System.Net.FileWebRequest' to type 'System.Net.HttpWebRequest'.
   at LY.UnifiedAuth.Util.Api.Core.Util.WebClientPro.GetWebRequest(Uri address) in D:\LingYiProject\GitProject\LYAdmin\Delivery.Core\LY.UnifiedAuth.Util.Api.Core\Util\WebClientPro.cs:line 33
   at System.Net.WebClient.DownloadDataInternal(Uri address, WebRequest& request)
   --- End of inner exception stack trace ---
   at System.Net.WebClient.DownloadDataInternal(Uri address, WebRequest& request)
   at System.Net.WebClient.DownloadString(Uri address)
   at System.Net.WebClient.DownloadString(String address)
   at LY.UnifiedAuth.Util.Api.Core.Util.ApiHttpUtility.WebRequestGet(String url, Hashtable headers, Encoding encoding) in D:\LingYiProject\GitProject\LYAdmin\Delivery.Core\LY.UnifiedAuth.Util.Api.Core\Util\ApiHttpUtility.cs:line 237
   at LY.UnifiedAuth.Util.Api.Core.Util.ApiHttpUtility.HttpGet(String url, Hashtable headers, Encoding encoding) in D:\LingYiProject\GitProject\LYAdmin\Delivery.Core\LY.UnifiedAuth.Util.Api.Core\Util\ApiHttpUtility.cs:line 46
   at LY.UnifiedAuth.Util.Api.Core.RequestApi.GetApi(String apiUrl, Hashtable headers) in D:\LingYiProject\GitProject\LYAdmin\Delivery.Core\LY.UnifiedAuth.Util.Api.Core\RequestApi.cs:line 37
   at LY.UnifiedAuth.Util.Api.Core.UaApi.GetApiAccessToken(String apiAppId, String apiAppSecret, Boolean isDebug) in D:\LingYiProject\GitProject\LYAdmin\Delivery.Core\LY.UnifiedAuth.Util.Api.Core\UaApi.cs:line 148
   at LY.UnifiedAuth.Util.Api.Core.UaApi.GetApiAccessToken(Boolean isDebug) in D:\LingYiProject\GitProject\LYAdmin\Delivery.Core\LY.UnifiedAuth.Util.Api.Core\UaApi.cs:line 129
   at LY.Report.Core.LYApiUtil.Ua.UaApiHelper.GetApiAccessToken(Boolean isDebug) in D:\LingYiProject\GitProject\LYAdmin\Delivery.Core\LY.Report.Core.LYApiUtil\Ua\UaApiHelper.cs:line 80
   at LY.Report.Core.LYApiUtil.ApiTokenHelper.ResetApiAccessTokenCache() in D:\LingYiProject\GitProject\LYAdmin\Delivery.Core\LY.Report.Core.LYApiUtil\ApiTokenHelper.cs:line 99
   at LY.Report.Core.LYApiUtil.ApiTokenHelper.GetApiAccessTokenEntity(Boolean isRefresh) in D:\LingYiProject\GitProject\LYAdmin\Delivery.Core\LY.Report.Core.LYApiUtil\ApiTokenHelper.cs:line 63
   at LY.Report.Core.LYApiUtil.ApiTokenHelper.GetApiAccessToken(Boolean isRefresh) in D:\LingYiProject\GitProject\LYAdmin\Delivery.Core\LY.Report.Core.LYApiUtil\ApiTokenHelper.cs:line 27
   at LY.Report.Core.LYApiUtil.Ua.UaApiHelper.CheckLogin(String loginToken) in D:\LingYiProject\GitProject\LYAdmin\Delivery.Core\LY.Report.Core.LYApiUtil\Ua\UaApiHelper.cs:line 124
   at LY.Report.Core.Service.User.Account.AccountService.LYUaLoginAsync(EupUaLoginInput input) in D:\LingYiProject\GitProject\LYAdmin\Delivery.Core\LY.Report.Core.Services\User\Account\AccountService.cs:line 324
   at LY.Report.Core.Aop.TransactionAsyncInterceptor.InternalInterceptAsynchronous[TResult](IInvocation invocation) in D:\LingYiProject\GitProject\LYAdmin\Delivery.Core\LY.Report.Core\Aop\TransactionAsyncInterceptor.cs:line 93
   at LY.Report.Core.Areas.Sys.V1.User.Controllers.AccountController.Login(EupUaLoginInput input) in D:\LingYiProject\GitProject\LYAdmin\Delivery.Core\LY.Report.Core\Areas\Sys\V1\User\Controllers\AccountController.cs:line 66
   at lambda_method642(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextExceptionFilterAsync>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)|url: http://locar.api.ly.com/Api/S/V1/User/Account/Login|action: Login
2022-07-04 16:52:28.6359 ||ERROR|LY.Report.Core.Filters.AdminExceptionFilter| System.Net.WebException: An exception occurred during a WebClient request.
 ---> System.InvalidCastException: Unable to cast object of type 'System.Net.FileWebRequest' to type 'System.Net.HttpWebRequest'.
   at LY.UnifiedAuth.Util.Api.Core.Util.WebClientPro.GetWebRequest(Uri address) in D:\LingYiProject\GitProject\LYAdmin\Delivery.Core\LY.UnifiedAuth.Util.Api.Core\Util\WebClientPro.cs:line 33
   at System.Net.WebClient.DownloadDataInternal(Uri address, WebRequest& request)
   --- End of inner exception stack trace ---
   at System.Net.WebClient.DownloadDataInternal(Uri address, WebRequest& request)
   at System.Net.WebClient.DownloadString(Uri address)
   at System.Net.WebClient.DownloadString(String address)
   at LY.UnifiedAuth.Util.Api.Core.Util.ApiHttpUtility.WebRequestGet(String url, Hashtable headers, Encoding encoding) in D:\LingYiProject\GitProject\LYAdmin\Delivery.Core\LY.UnifiedAuth.Util.Api.Core\Util\ApiHttpUtility.cs:line 237
   at LY.UnifiedAuth.Util.Api.Core.Util.ApiHttpUtility.HttpGet(String url, Hashtable headers, Encoding encoding) in D:\LingYiProject\GitProject\LYAdmin\Delivery.Core\LY.UnifiedAuth.Util.Api.Core\Util\ApiHttpUtility.cs:line 46
   at LY.UnifiedAuth.Util.Api.Core.RequestApi.GetApi(String apiUrl, Hashtable headers) in D:\LingYiProject\GitProject\LYAdmin\Delivery.Core\LY.UnifiedAuth.Util.Api.Core\RequestApi.cs:line 37
   at LY.UnifiedAuth.Util.Api.Core.UaApi.GetApiAccessToken(String apiAppId, String apiAppSecret, Boolean isDebug) in D:\LingYiProject\GitProject\LYAdmin\Delivery.Core\LY.UnifiedAuth.Util.Api.Core\UaApi.cs:line 148
   at LY.UnifiedAuth.Util.Api.Core.UaApi.GetApiAccessToken(Boolean isDebug) in D:\LingYiProject\GitProject\LYAdmin\Delivery.Core\LY.UnifiedAuth.Util.Api.Core\UaApi.cs:line 129
   at LY.Report.Core.LYApiUtil.Ua.UaApiHelper.GetApiAccessToken(Boolean isDebug) in D:\LingYiProject\GitProject\LYAdmin\Delivery.Core\LY.Report.Core.LYApiUtil\Ua\UaApiHelper.cs:line 80
   at LY.Report.Core.LYApiUtil.ApiTokenHelper.ResetApiAccessTokenCache() in D:\LingYiProject\GitProject\LYAdmin\Delivery.Core\LY.Report.Core.LYApiUtil\ApiTokenHelper.cs:line 99
   at LY.Report.Core.LYApiUtil.ApiTokenHelper.GetApiAccessTokenEntity(Boolean isRefresh) in D:\LingYiProject\GitProject\LYAdmin\Delivery.Core\LY.Report.Core.LYApiUtil\ApiTokenHelper.cs:line 63
   at LY.Report.Core.LYApiUtil.ApiTokenHelper.GetApiAccessToken(Boolean isRefresh) in D:\LingYiProject\GitProject\LYAdmin\Delivery.Core\LY.Report.Core.LYApiUtil\ApiTokenHelper.cs:line 27
   at LY.Report.Core.LYApiUtil.Ua.UaApiHelper.CheckLogin(String loginToken) in D:\LingYiProject\GitProject\LYAdmin\Delivery.Core\LY.Report.Core.LYApiUtil\Ua\UaApiHelper.cs:line 124
   at LY.Report.Core.Service.User.Account.AccountService.LYUaLoginAsync(EupUaLoginInput input) in D:\LingYiProject\GitProject\LYAdmin\Delivery.Core\LY.Report.Core.Services\User\Account\AccountService.cs:line 324
   at LY.Report.Core.Aop.TransactionAsyncInterceptor.InternalInterceptAsynchronous[TResult](IInvocation invocation) in D:\LingYiProject\GitProject\LYAdmin\Delivery.Core\LY.Report.Core\Aop\TransactionAsyncInterceptor.cs:line 93
   at LY.Report.Core.Areas.Sys.V1.User.Controllers.AccountController.Login(EupUaLoginInput input) in D:\LingYiProject\GitProject\LYAdmin\Delivery.Core\LY.Report.Core\Areas\Sys\V1\User\Controllers\AccountController.cs:line 66
   at lambda_method642(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextExceptionFilterAsync>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)|url: http://locar.api.ly.com/Api/S/V1/User/Account/Login|action: Login
2022-07-04 16:54:33.4943 ||ERROR|LY.Report.Core.Filters.AdminExceptionFilter| System.Net.WebException: An exception occurred during a WebClient request.
 ---> System.InvalidCastException: Unable to cast object of type 'System.Net.FileWebRequest' to type 'System.Net.HttpWebRequest'.
   at LY.UnifiedAuth.Util.Api.Core.Util.WebClientPro.GetWebRequest(Uri address) in D:\LingYiProject\GitProject\LYAdmin\Delivery.Core\LY.UnifiedAuth.Util.Api.Core\Util\WebClientPro.cs:line 33
   at System.Net.WebClient.DownloadDataInternal(Uri address, WebRequest& request)
   --- End of inner exception stack trace ---
   at System.Net.WebClient.DownloadDataInternal(Uri address, WebRequest& request)
   at System.Net.WebClient.DownloadString(Uri address)
   at System.Net.WebClient.DownloadString(String address)
   at LY.UnifiedAuth.Util.Api.Core.Util.ApiHttpUtility.WebRequestGet(String url, Hashtable headers, Encoding encoding) in D:\LingYiProject\GitProject\LYAdmin\Delivery.Core\LY.UnifiedAuth.Util.Api.Core\Util\ApiHttpUtility.cs:line 237
   at LY.UnifiedAuth.Util.Api.Core.Util.ApiHttpUtility.HttpGet(String url, Hashtable headers, Encoding encoding) in D:\LingYiProject\GitProject\LYAdmin\Delivery.Core\LY.UnifiedAuth.Util.Api.Core\Util\ApiHttpUtility.cs:line 46
   at LY.UnifiedAuth.Util.Api.Core.RequestApi.GetApi(String apiUrl, Hashtable headers) in D:\LingYiProject\GitProject\LYAdmin\Delivery.Core\LY.UnifiedAuth.Util.Api.Core\RequestApi.cs:line 37
   at LY.UnifiedAuth.Util.Api.Core.UaApi.GetApiAccessToken(String apiAppId, String apiAppSecret, Boolean isDebug) in D:\LingYiProject\GitProject\LYAdmin\Delivery.Core\LY.UnifiedAuth.Util.Api.Core\UaApi.cs:line 148
   at LY.UnifiedAuth.Util.Api.Core.UaApi.GetApiAccessToken(Boolean isDebug) in D:\LingYiProject\GitProject\LYAdmin\Delivery.Core\LY.UnifiedAuth.Util.Api.Core\UaApi.cs:line 129
   at LY.Report.Core.LYApiUtil.Ua.UaApiHelper.GetApiAccessToken(Boolean isDebug) in D:\LingYiProject\GitProject\LYAdmin\Delivery.Core\LY.Report.Core.LYApiUtil\Ua\UaApiHelper.cs:line 80
   at LY.Report.Core.LYApiUtil.ApiTokenHelper.ResetApiAccessTokenCache() in D:\LingYiProject\GitProject\LYAdmin\Delivery.Core\LY.Report.Core.LYApiUtil\ApiTokenHelper.cs:line 99
   at LY.Report.Core.LYApiUtil.ApiTokenHelper.GetApiAccessTokenEntity(Boolean isRefresh) in D:\LingYiProject\GitProject\LYAdmin\Delivery.Core\LY.Report.Core.LYApiUtil\ApiTokenHelper.cs:line 63
   at LY.Report.Core.LYApiUtil.ApiTokenHelper.GetApiAccessToken(Boolean isRefresh) in D:\LingYiProject\GitProject\LYAdmin\Delivery.Core\LY.Report.Core.LYApiUtil\ApiTokenHelper.cs:line 27
   at LY.Report.Core.LYApiUtil.Ua.UaApiHelper.CheckLogin(String loginToken) in D:\LingYiProject\GitProject\LYAdmin\Delivery.Core\LY.Report.Core.LYApiUtil\Ua\UaApiHelper.cs:line 124
   at LY.Report.Core.Service.User.Account.AccountService.LYUaLoginAsync(EupUaLoginInput input) in D:\LingYiProject\GitProject\LYAdmin\Delivery.Core\LY.Report.Core.Services\User\Account\AccountService.cs:line 324
   at LY.Report.Core.Aop.TransactionAsyncInterceptor.InternalInterceptAsynchronous[TResult](IInvocation invocation) in D:\LingYiProject\GitProject\LYAdmin\Delivery.Core\LY.Report.Core\Aop\TransactionAsyncInterceptor.cs:line 93
   at LY.Report.Core.Areas.Sys.V1.User.Controllers.AccountController.Login(EupUaLoginInput input) in D:\LingYiProject\GitProject\LYAdmin\Delivery.Core\LY.Report.Core\Areas\Sys\V1\User\Controllers\AccountController.cs:line 66
   at lambda_method642(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextExceptionFilterAsync>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)|url: http://locar.api.ly.com/Api/S/V1/User/Account/Login|action: Login
2022-07-04 23:16:18.1498 ||ERROR|LY.Report.Core.Program|Stopped program because of exception System.Exception: 【主库】状态不可用，等待后台检查程序恢复方可使用。A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server)
 ---> System.Exception: 【主库】状态不可用，等待后台检查程序恢复方可使用。A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server)
   at FreeSql.Internal.ObjectPool.ObjectPool`1.GetFree(Boolean checkAvailable)
   at FreeSql.Internal.ObjectPool.ObjectPool`1.Get(Nullable`1 timeout)
   at FreeSql.Internal.CommonProvider.AdoProvider.ExecuteReaderMultiple(Int32 multipleResult, DbConnection connection, DbTransaction transaction, Action`2 fetchHandler, Action`2 schemaHandler, CommandType cmdType, String cmdText, Int32 cmdTimeout, DbParameter[] cmdParms)
   --- End of inner exception stack trace ---
   at FreeSql.Internal.CommonProvider.AdoProvider.LoggerException(IObjectPool`1 pool, PrepareCommandResult pc, Exception ex, DateTime dt, StringBuilder logtxt, Boolean isThrowException)
   at FreeSql.Internal.CommonProvider.AdoProvider.ExecuteReaderMultiple(Int32 multipleResult, DbConnection connection, DbTransaction transaction, Action`2 fetchHandler, Action`2 schemaHandler, CommandType cmdType, String cmdText, Int32 cmdTimeout, DbParameter[] cmdParms)
   at FreeSql.Internal.CommonProvider.AdoProvider.ExecuteReader(DbConnection connection, DbTransaction transaction, Action`1 fetchHandler, CommandType cmdType, String cmdText, Int32 cmdTimeout, DbParameter[] cmdParms)
   at FreeSql.Internal.CommonProvider.Select0Provider`2.ToListMrPrivate[TReturn](String sql, ReadAnonymousTypeAfInfo af, ReadAnonymousTypeOtherInfo[] otherData)
   at FreeSql.Internal.CommonProvider.Select0Provider`2.ToListMapReaderPrivate[TReturn](ReadAnonymousTypeAfInfo af, ReadAnonymousTypeOtherInfo[] otherData)
   at FreeSql.Internal.CommonProvider.Select0Provider`2.ToListMapReader[TReturn](ReadAnonymousTypeAfInfo af)
   at FreeSql.Internal.CommonProvider.Select0Provider`2.InternalToList[TReturn](Expression select)
   at FreeSql.Internal.CommonProvider.Select1Provider`1.ToList[TReturn](Expression`1 select)
   at FreeSql.Internal.CommonProvider.Select1Provider`1.ToOne[TReturn](Expression`1 select)
   at FreeSql.Internal.CommonProvider.Select1Provider`1.First[TReturn](Expression`1 select)
   at LY.Report.Core.Db.DBServiceCollectionExtensions.AddDbAsync(IServiceCollection services, IHostEnvironment env) in D:\LingYiProject\GitProject\LYAdmin\Delivery.Core\LY.Report.Core\Db\DBServiceCollectionExtensions.cs:line 74|url: |action: 
